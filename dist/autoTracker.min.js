!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.AutoTrack=e():t.AutoTrack=e()}(this,function(){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function r(t){var e=i(5);return o=new e(t),"complete"===document.readyState?n(t.trackingFeatures):window.addEventListener("load",function(){n(t.trackingFeatures)},!1),o.getPageViewId()}function n(t){t=t||{};var e=i(1);t.pageLoad!==!1&&e.pageLoad(o),t.hashChange!==!1&&e.hashChange(o),t.pageUnload!==!1&&e.pageUnload(o);var r=i(2);t.clickButton!==!1&&r.button(o),t.clickSubmit!==!1&&r.submit(o);var n=i(3);t.relativeScroll!==!1&&n.trackScrollRelative(o,25),t.itemVisible!==!1&&n.trackScrollItems(o);var s=i(4);t.facebook!==!1&&(s.trackFacebookLikes(o),s.trackFacebookUnlikes(o),s.trackFacebookShares(o)),t.twitter!==!1&&s.trackTwitterShares(o)}var o={},s={};try{s="undefined"!=typeof pulse2opt?pulse2opt:_opt}catch(a){}t.exports.initTracking=function(t){r(t)},t.exports.getPageViewId=function(){return o.getPageViewId()},t.exports.getVisitorId=function(){return o.getVisitorId()},t.exports.getSessionId=function(){return o.getSessionId()},t.exports.logoutEvent=function(){o.refreshUserIds()},t.exports.loginEvent=function(t){o.refreshUserIds(t)},t.exports.activity=function(){return o};try{r(s)}catch(a){}},function(t){"use strict";t.exports.pageLoad=function(t){function e(t){for(var e=document.getElementsByTagName("meta"),i={},r={},n=!1,o=!1,s=0;s<e.length;s++){var a=e[s];if(a.getAttribute("name")&&a.getAttribute("content"))i["spt:"+a.getAttribute("name")]=decodeURI(a.getAttribute("content")),o=!0;else if(a.getAttribute("property")&&a.getAttribute("content")){var d=a.getAttribute("property");d.indexOf("og:")>-1&&(r["spt:"+d]=decodeURI(a.getAttribute("content")),n=!0)}}n&&t.addProperty("primary","spt:og",r),o&&t.addProperty("primary","spt:meta",i)}var i=t.events.trackPageLoad();e(i),i.send()},t.exports.hashChange=function(t){document.addEventListener("hashchange",function(){t.events.trackPageLoad().send()},!1)},t.exports.pageUnload=function(t){var e=Date.now(),i=!1;document.addEventListener("click",function(r){if(!i){i=!0;var n=r.target;if("a"===n.tagName.toLowerCase()){var o=n.getAttribute("href"),s=/^https?:\/\//i;if(null!==o.match(s)){t.events.trackEngagementTime(Date.now()-e).queue();var a=t.events.trackExit("urn:exit:"+o,"Page");a.addProperty("secondary","url",o),a.queue(),t.sendQueue()}}}},!1),window.addEventListener("beforeunload",function(){i||(i=!0,t.events.trackEngagementTime(Date.now()-e).queue(),t.events.trackExit().queue(),t.sendQueue())}),window.addEventListener("unload",function(){i||(i=!0,t.events.trackEngagementTime(Date.now()-e).queue(),t.events.trackExit().queue(),t.sendQueue())},!1)}},function(t){"use strict";t.exports.button=function(t){document.addEventListener("click",function(e){e=e||window.event;var i=e.target||e.srcElement;/.*track-click.*/.test(i.className)&&t.events.trackClick(i.id).send()},!1)},t.exports.submit=function(t){document.addEventListener("submit",function(e){function i(t){return t.className.indexOf("track-comment")>-1?{obj:t,type:"track-comment"}:t.className.indexOf("track-poll")>-1?{obj:t,type:"track-poll"}:{obj:t,type:"track-form"}}var r=e.target||e.srcElement,n=i(r);null!==n&&n.obj.id&&("track-form"===n.type?t.events.trackForm(n.obj.id,"Note","Post").send():"track-comment"===n.type?t.events.trackComment(n.obj.id,"Post").send():"track-poll"===n.type&&t.events.trackPoll(n.obj.id,"Post").send())},!1)}},function(t){"use strict";t.exports.trackScrollRelative=function(t,e){var i=0;document.addEventListener("scroll",function(){var r=document.getElementsByTagName("body")[0],n=r.scrollTop/(r.offsetHeight-window.innerHeight)*100;n-i>1.5*e&&(i=Math.floor(n/e)*e),n>=i+e?(i+=e,t.events.trackScroll(i,"Arrive").send(),i>100&&(i=100)):i-e>=n&&(i-=e,t.events.trackScroll(i,"Arrive").send(),i>100&&(i=100))},!1)},t.exports.trackScrollItems=function(t){function e(t){for(var e=t.offsetTop,i=t.offsetLeft,r=t.offsetWidth,n=t.offsetHeight;t.offsetParent;)t=t.offsetParent,e+=t.offsetTop,i+=t.offsetLeft;return e<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth&&e+n>window.pageYOffset&&i+r>window.pageXOffset}var i,r=[],n=document.getElementsByTagName("*");for(i=0;i<n.length;i++)(" "+n[i].className+" ").indexOf(" track-visibility ")>-1&&r.push({element:n[i],visible:!1});document.addEventListener("scroll",function(){for(i=0;i<r.length;i++){var n=r[i];if(e(n.element)!==n.visible)if(n.visible===!1)n.visible=!0,n.timeStart=t.utils.getTimestamp(),t.events.trackVisibility(n.element.id,n.timeStart).send();else if(n.visible===!0){n.visible=!1;var o={start:n.timeStart,end:t.utils.getTimestamp()};t.events.trackVisibility(n.element.id,o).send(),n.timeStart=null}}},!1)}},function(t){"use strict";t.exports.trackFacebookLikes=function(t){FB.Event.subscribe("edge.create",function(e){var i=t.events.trackSocial("facebook-like","Facebook","Like");i.addProperty("tertiary","url",e),i.send()})},t.exports.trackFacebookUnlikes=function(t){FB.Event.subscribe("edge.remove",function(e){var i=t.events.trackSocial("facebook-unlike","Facebook","Remove");i.addProperty("tertiary","url",e),i.send()})},t.exports.trackFacebookShares=function(t){FB.Event.subscribe("message.send",function(e){var i=t.events.trackSocial("facebook-share","Facebook","Share");i.addProperty("tertiary","url",e),i.send()})},t.exports.trackTwitterShares=function(t){function e(){t.events.trackSocial("twitter-share","Twitter","Share").send()}try{twttr.ready(function(){if(void 0===typeof twttr)throw"twitter is not included in the site";twttr.events.bind("tweet",e)})}catch(i){}}},function(t,e,i){"use strict";function r(t){if(!t.clientId)throw new Error("clientId is required");this.vars=o,this.clientId="urn:schibsted.com:"+t.clientId,this.url=t.url?t.url+"/"+this.clientId:this.vars.envVars.dataCollectorUrl+"/"+this.clientId,this.transport=t.transport?t.transport:u,this.allowTracking=t.respectDoNotTrack===!0&&1===navigator.doNotTrack?!1:!0,this.opts=t,this.pageViewId=d.getUuidV4(),this.pageId=t.pageId||document.location,this.pageType=t.pageType||"Page",this.provider=t.provider||{},this.userIdDomain=t.userIdDomain||"schibsted.com",this.noCisCookie=t.noCisCookie||!1,this.utils=d,this.queue=[],this.events=new a(this),this.user=new c(this),t.visitorId&&(this.visitorId=t.visitorId),t.userId?(this.userId=t.userId,this.loggedIn=!0):this.loggedIn=!1,this.initIds(function(){})}var n=i(6)("spt:pulse"),o={};try{o=i(7)}catch(s){o=i(8)}var a=i(9),d=i(10),c=i(11),u=i(12);r.prototype.initIds=function(t){t=t||function(){};var e=this;n("Fetching Ids"),this.user.getUserId(function(i,r){return i?(n("Failed to fetch userId",i),e.visitorId=null,e.userId=null,e.envId=null,e.sessionId=null):(e.visitorId||(e.visitorId=r.visitorId),e.userId||(e.userId=r.userId),e.envId=r.envId,e.sessionId=r.sessionId),e.waitingToTransmitQueue===!0&&(e.sendQueue(),e.waitingToTransmitQueue=!1),t(r)})},r.prototype.addToQueue=function(t){this.queue.push(t)},r.prototype.sendQueue=function(t){if(t||(t=function(){}),!this.queue.length)return t();if(!this.allowTracking)return t();if("undefined"==typeof this.visitorId)return this.waitingToTransmitQueue=!0,t();n("Sending queue");for(var e=this.queue.slice(0),i=0;i<e.length;i++)this.addUserId(e[i]);this.queue=[];var r=this;this.transport(this.url,e,function(i){i?(n("Failed to send queue"),r.queue=r.queue.concat(e),t(i)):t()})},r.prototype.addUserId=function(t){"undefined"!=typeof this.visitorId&&"undefined"!==this.visitorId&&(t.actor["@id"]=null!==this.visitorId&&-1===String(this.visitorId).indexOf("urn")?"urn:schibsted.com:person:"+this.visitorId:this.visitorId,t.actor["spt:environmentId"]=null!==this.envId&&-1===String(this.envId).indexOf("urn")?"urn:schibsted.com:environment:"+this.envId:this.envId,t.actor["spt:sessionId"]=null!==this.sessionId&&-1===String(this.sessionId).indexOf("urn")?"urn:schibsted.com:session:"+this.sessionId:this.sessionId,this.userId&&-1===String(this.userId).indexOf("undefined")&&(t.actor["spt:userId"]=-1===String(this.userId).indexOf("urn")?"urn:"+this.userIdDomain+":user:"+this.userId:this.userId))},r.prototype.send=function(t,e){if(e||(e=function(){}),!this.allowTracking)return e();if("undefined"==typeof this.visitorId)return this.addToQueue(t),this.waitingToTransmitQueue=!0,e();n("Sending object");var i=this;this.addUserId(t),this.transport(this.url,[t],function(r){r?(n("Failed to send object"),i.addToQueue(t),e(r)):e()})},r.prototype.createActor=function(){var t={};return t["@type"]="Person",t["spt:userAgent"]=navigator.userAgent,t["spt:screenSize"]=window.screen.width+"x"+window.screen.height,t["spt:viewportSize"]=d.getViewportDimensions(),t["spt:acceptLanguage"]=d.getDeviceLanguage(),t},r.prototype.createReducedActor=function(){var t={};return t["@type"]="Person",t},r.prototype.createProvider=function(){var t={};t["@type"]="Organization",t["@id"]=this.clientId,t.url=document.URL;for(var e in this.provider)this.provider.hasOwnProperty(e)&&(t[e]=this.provider[e]);return t},r.prototype.createScaffold=function(t){var e={},i={spt:"http://schibsted.com","spt:sdkType":"JS","spt:sdkVersion":"0.1.0"};return e["@context"]=["http://www.w3.org/ns/activitystreams",i],e["@id"]=d.getUuidV4(),e["spt:pageViewId"]=this.pageViewId,e.published=d.getTimestamp(),e.actor=t?this.createActor():this.createReducedActor(),e.provider=this.createProvider(),e},r.prototype.getPageViewId=function(){return this.pageViewId},r.prototype.getSessionId=function(){return this.sessionId},r.prototype.getVisitorId=function(){return this.visitorId},r.prototype.refreshUserIds=function(t){this.user.idObj.visitorId=void 0,this.user.idObj.userId=t||void 0,this.visitorId=void 0,this.userId=t||void 0,this.loggedIn=t?!0:!1,this.user.setUserIdInCookie(!1);var e=this;this.user.getUserId(function(t,i){if(t)throw new Error("Could not fetch id");e.visitorId&&"undefined"!=typeof e.visitorId&&"undefined"!==e.visitorId||(e.visitorId=i.visitorId),e.userId||(e.userId=i.userId),e.envId=i.envId,e.sessionId=i.sessionId,e.waitingToTransmitQueue===!0&&(e.sendQueue(),e.waitingToTransmitQueue=!1)})},t.exports=r},function(t){"use strict";t.exports=function(){return function(){}}},function(t){t.exports.envVars={dataCollectorUrl:"https://collector.schibsted.io/api/v1/track",userServiceUrl:"https://cis.schibsted.com/api/v1/identify",errorReportingUrl:"",sdkVersion:"0.3.0"}},function(t){t.exports.envVars={dataCollectorUrl:"http://127.0.0.1:8002/api/v1/track",userServiceUrl:"https://cis.schibsted.com/api/v1/identify",errorReportingUrl:"",sdkVersion:"0.3.0"}},function(t,e,i){"use strict";function r(t){if(!t)throw new Error("activity required");this.activity=t,this.pageId=t.pageId,this.pageType=t.pageType}var n=i(13);r.prototype.trackPageLoad=function(t,e){var i=this.activity.createScaffold(!0);return i["@type"]=e||"Read",i.object=this.addPageStandards(),i.object.displayName=t||document.title,new n(this.activity,i,["object"])},r.prototype.trackForm=function(t,e,i){var r=this.activity.createScaffold();return r["@type"]=i||"Post",r.object={"@id":this.getUrnIdWithPageType()+":form:"+t},r.origin=this.addPageStandards(),r.result={"@type":e,"@id":this.getUrnIdWithPageType()+":form:"+t},new n(this.activity,r,["object","result","origin"])},r.prototype.trackComment=function(t,e){return this.trackForm(t,"Note",e)},r.prototype.trackPoll=function(t,e){return this.trackForm(t,"Question",e)},r.prototype.trackClick=function(t,e,i,r,o){var s=this.activity.createScaffold();return s["@type"]=o||"Accept",s.object={"@id":this.getUrnIdWithPageType(r,i)+":element:"+t,"@type":"Link",displayName:e},s.target={"@id":this.getUrnIdWithPageType(r,i),"@type":i},new n(this.activity,s,["object","target"])},r.prototype.trackSocial=function(t,e,i){var r=this.activity.createScaffold();return r["@type"]=i||"Like",r.object=this.addPageStandards(),r.origin={"@id":this.getUrnIdWithPageType()+":element:"+t,"@type":"Link"},r.target={"@id":"urn:"+e.toLowerCase()+":action:"+r["@type"].toLowerCase(),"@type":"Service"},new n(this.activity,r,["object","origin","target"])},r.prototype.trackMediaState=function(t,e,i){var r=this.activity.createScaffold();return r["@type"]=i||"Watch",r.object={"@type":e,"@id":this.getUrnIdWithPageType()+":"+e+":"+t},r.origin=this.addPageStandards(),new n(this.activity,r,["object","origin"])},r.prototype.trackScroll=function(t,e){var i=this.activity.createScaffold();return i["@type"]=e||"Arrive",i.object=this.addPageStandards(),i.result={"@type":"Place","@id":this.getUrnIdWithPageType()+":scroll:"+t,"spt:depth":t},new n(this.activity,i,["object","result"])},r.prototype.trackVisibility=function(t,e,i){if("undefined"==typeof e)throw new Error("No time parameter was passed to this function");var r=this.activity.createScaffold();return r["@type"]=i||"View",r.origin=this.addPageStandards(),r.object={"@type":"Content","@id":this.getUrnIdWithPageType()+":element:"+t},e.start?r.object.startTime=e.start:e&&!e.end&&(r.object.startTime=e),e.end&&(r.object.endTime=e.end),new n(this.activity,r,["origin","object"])},r.prototype.trackExit=function(t,e,i){var r=this.activity.createScaffold();return r["@type"]=i||"Leave",r.object=this.addPageStandards(),r.target={},"undefined"!=typeof t&&"undefined"!=typeof e&&(r.target={"@type":e,"@id":this.getUrnIdWithPageType(t,e)}),new n(this.activity,r,["object","target"])},r.prototype.trackEngagementTime=function(t,e){var i=this.activity.createScaffold();return i["@type"]=e||"View",i.object=this.addPageStandards(),i.duration=t,new n(this.activity,i,["object"])},r.prototype.trackCustomEvent=function(t,e){var i=this.activity.createScaffold(),r=[];if(!e||!t)throw new Error("activityType and obj is required");i["@type"]=e;for(var o in t)i[o]=t[o],r.push(o);return new n(this.activity,i,r)},r.prototype.addPageStandards=function(){var t={};return t["@type"]=this.activity.pageType,t["@id"]=String(this.activity.pageId).indexOf("urn:")>-1?this.activity.pageId:this.getUrnIdWithPageType(this.activity.pageId),t.url=document.URL,t.displayName=document.title,t},r.prototype.getUrnIdWithPageType=function(t,e){var i=t||this.activity.pageId;if(-1===String(i).indexOf("urn:")){var r=e||this.activity.pageType,n=this.getDomainFromUrl(document.URL);return"urn:"+n+":"+r.toLowerCase()+":"+i}return i},r.prototype.getDomainFromUrl=function(t){var e=t.match(/^https?\:\/\/(www.)?([^\/:?#]+)(?:[\/:?#]|$)/i);return e&&e[2]},t.exports=r},function(t,e,i){"use strict";var r={};try{r=i(7)}catch(n){r=i(8)}var o=i(12);t.exports.retry=function(t,e,i){if(!t||"number"!=typeof t)throw new Error("times required");if(!e||"function"!=typeof e)throw new Error("task required");if(!i||"function"!=typeof i)throw new Error("callback required");var r=1,n=function(){arguments[0]&&r>=t?i.apply(null,arguments):arguments[0]?(r+=1,e(n)):i.apply(null,arguments)};e(n)},t.exports.getViewportDimensions=function(){var t,e;return"undefined"!=typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):"undefined"!=typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(t=document.getElementsByTagName("body")[0].clientWidth,e=document.getElementsByTagName("body")[0].clientHeight),t+"x"+e},t.exports.getDeviceLanguage=function(){var t;return navigator.userLanguage?t=navigator.userLanguage:navigator.language&&(t=navigator.language),t},t.exports.getTimestamp=function(){var t=new Date,e=-t.getTimezoneOffset(),i=e>=0?"+":"-",r=function(t){var e=Math.abs(Math.floor(t));return(10>e?"0":"")+e},n=t.getFullYear()+"-"+r(t.getMonth()+1)+"-"+r(t.getDate());return n=n+"T"+r(t.getHours())+":"+r(t.getMinutes()),n=n+":"+r(t.getSeconds()),n=n+i+r(e/60)+":"+r(e%60)},t.exports.getUuidV4=function(){for(var t="",e=0;36>e;e++){var i=null;i=14===e?4:19===e?Math.floor(4*Math.random()+8).toString(16):8===e||13===e||18===e||23===e?"-":Math.floor(16*Math.random()).toString(16),t+=i}return t},t.exports.sendErrorReport=function(t){var e={errorCode:"GENERAL_ACTIVITY_ERROR",errorMessage:"Something went wrong",sdkType:"JS",sdkVersion:r.envVars.sdkVersion,options:{clientId:"abc",dataCollectorUrl:r.envVars.dataCollectorUrl,anonymousIdentityUrl:r.envVars.userServiceUrl,errorReportingUrl:r.envVars.errorReportingUrl,retries:t}};o(r.envVars.errorReportingUrl,e)},t.exports.getQueryVariable=function(t){for(var e=window.location.search.substring(1),i=e.split("&"),r=0;r<i.length;r++){var n=i[r].split("=");if(n[0]===t)return n[1]}return void 0}},function(t,e,i){"use strict";function r(t){this.idObj={},this.idObj.userId=t.userId,this.idObj.sessionId=void 0,this.idObj.visitorId=t.visitorId,this.idObj.envId=void 0,this.envKey="_DataTrackerEnv",this.sessionKey="_DataTrackerSession",this.userKey="_DataTrackerUser",this.visitorKey="_DataTrackerVisitor",this.cookiesAllowed=navigator.cookieEnabled,this.activity=t,this.idServiceUrl=this.activity.vars.envVars.userServiceUrl,this.opts=t.opts,this.transport=this.activity.opts.transport?this.activity.opts.transport:n}var n=i(12);r.prototype.getUserId=function(t){var e={sessionId:this.getUserIdFromCookie(this.sessionKey),environmentId:this.getUserIdFromCookie(this.envKey),userId:this.getUserIdFromCookie(this.userKey)},i=this.getUserIdFromCookie(this.visitorKey);null!==i&&"undefined"!==i&&void 0!==typeof i&&(e.visitorId=i),this.activity.loggedIn===!1&&void 0!==typeof e.userId?(e={sessionId:void 0,environmentId:void 0,userId:void 0,visitorId:void 0},this.transferUserData(e)):this.activity.loggedIn&&void 0===typeof e.userId&&(e.userId=this.activity.userId,this.transferUserData(e));var r=this;this.getUserIdFromService(e,function(e,i){return e?t(e):(r.transferUserData(i),"undefined"==typeof r.activity.utils.getQueryVariable("failedToSetCookie")&&(i.cisCookieSet||!r.cookiesAllowed||r.activity.noCisCookie||r.getUserIdFromService({ping:"pong"},function(e,i){if(e&&t(e),r.transferUserData(i),!i.cisCookieSet&&r.cookiesAllowed){var n="https://stage-identity.spid.se/redirect";n+="?redirectUrl="+document.location,window.location.assign(n)}t(null,r.idObj)}),t(null,r.idObj)),void t(null,r.idObj))})},r.prototype.transferUserData=function(t){this.idObj.userId=t.userId,this.idObj.sessionId=t.sessionId,this.idObj.visitorId=t.visitorId,this.idObj.envId=t.environmentId,this.idObj.temporaryId=!1,t.environmentIdTemporary===!0&&(this.idObj.temporaryId=!0),null!==this.idObj.envId&&this.setUserIdInCookie(this.idObj.temporaryId)},r.prototype.getUserIdFromCookie=function(t){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||void 0},r.prototype.getUserIdFromService=function(t,e){var i=this.activity.opts.userServiceUrl||this.activity.vars.envVars.userServiceUrl,r=!0;this.activity.noCisCookie&&(r=!1),this.transport(i,t,function(t,i){if(t)return e(t);var r=JSON.parse(i.response||i.responseText);e(null,r.data)},r)},r.prototype.setUserIdInCookie=function(t){var e=new Date,i=e.getTime(),r=i+36e9;e.setTime(r),document.cookie=t?this.envKey+"="+this.idObj.envId:this.envKey+"="+this.idObj.envId+";expires="+e.toGMTString(),document.cookie=this.sessionKey+"="+this.idObj.sessionId,document.cookie=this.visitorKey+"="+this.idObj.visitorId+";expires="+e.toGMTString(),document.cookie=this.userKey+"="+this.idObj.userId+";expires="+e.toGMTString()},t.exports=r},function(t,e,i){"use strict";function r(){if(XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.6.0")}catch(t){try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(t){throw new Error("This browser does not support AJAX")}}}function n(t,e,i,n){if(!i)throw new Error("callback required");return t?e&&"object"==typeof e?(n=n||!1,void o.retry(5,function(i){var o=r();o.onreadystatechange=function(){4===this.readyState&&(200===this.status?i(null,o):i("Failed with status "+this.status))},o.open("POST",t),o.setRequestHeader("Content-Type","application/json; charset=utf-8"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=n;try{var s=JSON.stringify(e);o.send(s)}catch(a){i(a.name+": "+a.message)}},i)):i("data required"):i("url required")}var o=i(10);t.exports=n},function(t){"use strict";function e(t,e,i){if(!t)throw new Error("activity required");if(!e)throw new Error("data required");this.activity=t,this.data=e,this.objectOrder=i||[]}e.prototype.queue=function(){this.activity.addToQueue(this.data)},e.prototype.send=function(t){this.activity.send(this.data,t)},e.prototype.addProperty=function(t,e,i){var r=this.getObjectKey(t);return this.data[r][e]=i,this},e.prototype.addCustomData=function(t,e){var i=this.getObjectKey(t);return this.data[i]["spt:custom"]=e,this},e.prototype.getObjectKey=function(t){if("primary"===t)return this.objectOrder[0];if("secondary"===t)return this.objectOrder[1];if("tertiary"===t)return this.objectOrder[2];throw new Error("Object reference not valid")},t.exports=e}])});